<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>模块详情 | chain33Ethers.js</title>
    <meta name="description" content="an typescript module extends from ethersJs to enable Bty Chain33 use Ether.js library">
    <link rel="stylesheet" href="/assets/style.ac9a6318.css">
    <link rel="modulepreload" href="/assets/app.7fd0b966.js">
    <link rel="modulepreload" href="/assets/modules_index.md.c23d80b7.lean.js">
    
    <meta name="twitter:title" content="模块详情 | chain33Ethers.js">
  <meta property="og:title" content="模块详情 | chain33Ethers.js">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="chain33Ethers.js, back to home" data-v-675d8756 data-v-cc01ef16><!----> chain33Ethers.js</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/usage/" data-v-b8818f8c>使用说明 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/modules/" data-v-b8818f8c>模块详情 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="http://localhost:3000/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>playGround <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://chain.33.cn/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>关于Chain33 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>关于Ethers.js <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/usage/" data-v-b8818f8c>使用说明 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/modules/" data-v-b8818f8c>模块详情 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="http://localhost:3000/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>playGround <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://chain.33.cn/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>关于Chain33 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>关于Ethers.js <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#结构">结构</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#index-ts">Index.ts</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#链接">链接</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#断开链接">断开链接</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#获取区块链块数量">获取区块链块数量</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#获取区块链块信息">获取区块链块信息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#获取网络信息">获取网络信息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#获取交易费价格">获取交易费价格</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#获取用户信息">获取用户信息</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#初始化合约对象">初始化合约对象</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#使用合约方法">使用合约方法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#查看合约地址">查看合约地址</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#发送主链交易">发送主链交易</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#签名交易">签名交易</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#合约部署">合约部署</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#添加token到metamask">添加token到metamask</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#其他方法">其他方法</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#contract">Contract</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#components">Components</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="模块详情" tabindex="-1">模块详情 <a class="header-anchor" href="#模块详情" aria-hidden="true">#</a></h1><p>chain33Ethers 是一个 <a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a> 衍生的工具包, 改文档只会标注BtyEthers和<a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a>不同的地方，其余方法的详细使用请查<a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a>的官网文档</p><h2 id="结构" tabindex="-1">结构 <a class="header-anchor" href="#结构" aria-hidden="true">#</a></h2><div class="language-dotnetcli"><pre><code>    - BtyEthers
        - components
            - ...browser views components
        - config.ts
        - Contract
        - Provider
        - Version.ts
        - view.tsx
        - Index.ts
</code></pre></div><h2 id="index-ts" tabindex="-1">Index.ts <a class="header-anchor" href="#index-ts" aria-hidden="true">#</a></h2><p>BtyEthers的结构体出口文件，整合了大量Ether可用的方法，部分流程上的修改用于适应Bth链的兼容</p><ul><li><h3 id="链接" tabindex="-1">链接 <a class="header-anchor" href="#链接" aria-hidden="true">#</a></h3><p>connect(_signerType) 链接钱包，目前只支持 _signerType = &#39;metamask&#39;,后期会加入其他第三方安全的钱包</p></li><li><h3 id="断开链接" tabindex="-1">断开链接 <a class="header-anchor" href="#断开链接" aria-hidden="true">#</a></h3><p>disconnect() 断开链接（注意：metamask并不会被disconnect真正断开，如果要完全登出metamask账号需手动操作metamask插件来关闭，这里的断开只是断开用户使用btyEther方法的权限）</p></li><li><h3 id="获取区块链块数量" tabindex="-1">获取区块链块数量 <a class="header-anchor" href="#获取区块链块数量" aria-hidden="true">#</a></h3><p>getBlockNumber() 完全继承于<a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a> getBlockNumber()方法</p></li><li><h3 id="获取区块链块信息" tabindex="-1">获取区块链块信息 <a class="header-anchor" href="#获取区块链块信息" aria-hidden="true">#</a></h3><p>getBlock() 完全继承于<a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a> getBlock()方法</p></li><li><h3 id="获取网络信息" tabindex="-1">获取网络信息 <a class="header-anchor" href="#获取网络信息" aria-hidden="true">#</a></h3><p>detectNetwork() 完全继承于<a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a> detectNetwork()方法</p></li><li><h3 id="获取交易费价格" tabindex="-1">获取交易费价格 <a class="header-anchor" href="#获取交易费价格" aria-hidden="true">#</a></h3><p>getGasPrice() 完全继承于<a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a> getGasPrice()方法</p></li><li><h3 id="获取用户信息" tabindex="-1">获取用户信息 <a class="header-anchor" href="#获取用户信息" aria-hidden="true">#</a></h3><p>getSigner() 在使用metamask的时候返回 window.etherumn</p></li><li><h3 id="初始化合约对象" tabindex="-1">初始化合约对象 <a class="header-anchor" href="#初始化合约对象" aria-hidden="true">#</a></h3><p>setContractInstance(contractAddress: string,abi:any) 返回一个ethers.js中的<a href="https://docs.ethers.io/v5/api/contract/" target="_blank" rel="noopener noreferrer">Contract</a>结构，用于做合约操作</p></li><li><h3 id="使用合约方法" tabindex="-1">使用合约方法 <a class="header-anchor" href="#使用合约方法" aria-hidden="true">#</a></h3><p>callContractMetthod(methodName: string,params?:any[]) 网络请求Contract对象中的方法</p></li></ul><div class="language-ts"><pre><code>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> btyEther<span class="token punctuation">.</span><span class="token function">callContractMetthod</span><span class="token punctuation">(</span><span class="token string">&#39;transfer&#39;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&#39;0x89c893e850cff3d531f4c477112F052a536E4843&#39;</span><span class="token punctuation">,</span><span class="token number">14442223</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> res

</code></pre></div><ul><li><h3 id="查看合约地址" tabindex="-1">查看合约地址 <a class="header-anchor" href="#查看合约地址" aria-hidden="true">#</a></h3><p>isContract(contractAddress: string) 用于查看一个地址是否是合约地址</p></li><li><h3 id="发送主链交易" tabindex="-1">发送主链交易 <a class="header-anchor" href="#发送主链交易" aria-hidden="true">#</a></h3><p>send((params:{to:string,value?:string,data?:string})) 主链上的交易发送函数，包括构造-&gt;签名（根据登录方式）-&gt;发送签名交易</p></li><li><h3 id="签名交易" tabindex="-1">签名交易 <a class="header-anchor" href="#签名交易" aria-hidden="true">#</a></h3><p>signTransaction(data: string) 根据不同的登录方式，对交易数据进行签名</p></li><li><h3 id="合约部署" tabindex="-1">合约部署 <a class="header-anchor" href="#合约部署" aria-hidden="true">#</a></h3><p><code>deploy(abi:any,bytecode:any,options?:any)</code> 进行合约的部署交易发送</p></li><li><h3 id="添加token到metamask" tabindex="-1">添加token到metamask <a class="header-anchor" href="#添加token到metamask" aria-hidden="true">#</a></h3><p>addTokenAssets(data:any) 根据config中的配置对metaMask中的token显示列表进行配置</p></li><li><h3 id="其他方法" tabindex="-1">其他方法 <a class="header-anchor" href="#其他方法" aria-hidden="true">#</a></h3><p>btyEther完全继承于<a href="https://docs.ethers.io/v5/" target="_blank" rel="noopener noreferrer">ethers.js</a>，所以大部分ethers.js的方法可以通过btyEthers._provider或者btyEthers._contract来进行访问，注意，btyEhters没有相同的signer对象，因为btyEthers是根据用户使用的第三方安全web3插件登录信息来获取signer信息，并不储存signer信息</p></li></ul><h2 id="contract" tabindex="-1">Contract <a class="header-anchor" href="#contract" aria-hidden="true">#</a></h2><p>合约结构体大部分继承，使用了ethers.js中的<a href="https://docs.ethers.io/v5/api/contract/" target="_blank" rel="noopener noreferrer">Contract</a>模块，对buildSend及相关的模块进行了流程修改来适应btyEther节点的设计，所有Ethers.js支持的Contract方法你可以在getContract()的返回值中获得。</p><h2 id="components" tabindex="-1">Components <a class="header-anchor" href="#components" aria-hidden="true">#</a></h2><p>文件夹存放了部分前端ui tempalte,如’登录框&#39;</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"46cf4429\",\"modules_index.md\":\"c23d80b7\",\"usage_index.md\":\"a66f4719\"}")</script>
    <script type="module" async src="/assets/app.7fd0b966.js"></script>
    
  </body>
</html>